<!DOCTYPE html>
<html class="no-js" lang="en">

<head>

    <!--- basic page needs
    ================================================== -->
    <meta charset="utf-8">
    <title>RaceTrack</title>
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" type="image/ico" href="favicon.ico">


    <!-- mobile specific metas
    ================================================== -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- CSS
    ================================================== -->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/vendor.css">

    <!-- script
    ================================================== -->
    <script src="js/modernizr.js"></script>
    <script defer src="js/fontawesome/all.min.js"></script>

    <!-- favicons
    ================================================== -->
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="manifest" href="site.webmanifest">

    <style>
        #compound-buttons button {
            flex: 1 0 120px;
            padding: 10px 12px;
            border: none;
            background-color: #222;
            color: #fff;
            border-radius: 5px;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.2s;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        #compound-buttons button:hover {
            background-color: #444;
        }
    </style>

</head>

<body id="top">


    <!-- preloader
    ================================================== -->
    <div id="preloader">
        <div id="loader" class="dots-fade">
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>


    <!-- header
    ================================================== -->
    <header class="s-header">

        <div class="s-header__logo">
            <a href="index.html"> <!-- <h5>RaceTrack</h5> -->
                <img src="images/logo.png" alt="Homepage" style="height: 125px; width: 100px;">
            </a>
        </div>

        <div class="s-header__content">

            <nav class="s-header__nav-wrap">
                <ul class="s-header__nav">
                    <li><a class="smoothscroll" href="#hero" title="Intro">Home</a></li>
                    <li><a class="smoothscroll" href="#about" title="About">Races</a></li>
                    <li><a class="smoothscroll" href="#clients" title="About">About Us</a></li>
                    <li><a href="https://f1tv.formula1.com/" title="Official F1 Site" target="_blank"
                            rel="noopener noreferrer">Official F1</a></li>
                </ul>
            </nav> <!-- end s-header__nav-wrap -->

            <a href="images/F12025Calendar.jpg" class="btn btn--primary btn--small" target="_blank">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                    <path
                        d="M24 0l-6 22-8.129-7.239 7.802-8.234-10.458 7.227-7.215-1.754 24-12zm-15 16.668v7.332l3.258-4.431-3.258-2.901z" />
                </svg>
                Race Calendar
            </a>


        </div> <!-- end header-content -->

        <a class="s-header__menu-toggle" href="#0"><span>Menu</span></a>

    </header> <!-- end s-header -->


    <!-- hero
    ================================================== -->
    <section id="hero" class="s-hero target-section">

        <div class="s-hero__bg">
            <div class="gradient-overlay"></div>
        </div>

        <div class="row s-hero__content">
            <div class="column">

                <h1>RaceTrack.</h1>
                <div class="s-hero__content-about">

                    <p>
                        Real time race predictions.<br>
                        by Orianna Milone Salas.
                    </p>

                    <!-- <footer>
                        <div class="s-hero__content-social">
                            <a href="#0"><i class="fab fa-facebook-f" aria-hidden="true"></i></a>
                            <a href="#0"><i class="fab fa-twitter" aria-hidden="true"></i></a>
                            <a href="#0"><i class="fab fa-instagram" aria-hidden="true"></i></a>
                            <a href="#0"><i class="fab fa-dribbble" aria-hidden="true"></i></a>
                        </div>
                    </footer> -->
                </div>

            </div>
        </div>

        <div class="s-hero__video">
            <a class="s-hero__video-link"
                href="https://player.vimeo.com/video/117310401?color=01aef0&amp;title=0&amp;byline=0&amp;portrait=0"
                data-lity="">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                    <path d="M21 12l-18 12v-24z" />
                </svg>
                <span class="s-hero__video-text">Play Video</span>
            </a>
        </div>

        <div class="s-hero__scroll">
            <a href="#about" class="s-hero__scroll-link smoothscroll">
                Scroll Down
            </a>
        </div>

    </section> <!-- end s-hero -->


    <!-- Race 
    ================================================== -->
    <section id="about" class="s-about">

        <div class="horizontal-line"></div>

        <div class="row">
            <div style="margin-bottom: 20px;">
                <h1 style="margin: 0;">Real-Time Race Simulation</h1>
                <h3 id="vuelta-titulo" style="margin-top: 5px; font-weight: normal;">Waiting for simulation data...</h3>
            </div>

            <canvas id="graficoCarrera" width="800" height="400"></canvas>
            <script src="/socket.io/socket.io.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

            <div style="margin-top: 30px; width: 100%;">
                <p style="font-weight: bold; font-size: 1.7rem; color: #f0f0f0; margin-bottom: 15px;">
                    Tyre Compounds <span style="font-weight: normal;"></span>
                </p>
                <div id="compound-buttons" style="display: flex; gap: 10px; flex-wrap: wrap;">
                    <button onclick="filtrarPorCompuesto('SUPERSOFT')">SUPERSOFT</button>
                    <button onclick="filtrarPorCompuesto('SOFT')">SOFT</button>
                    <button onclick="filtrarPorCompuesto('MEDIUM')">MEDIUM</button>
                    <button onclick="filtrarPorCompuesto('HARD')">HARD</button>
                </div>
            </div>

            <!-- Race Logs -->
            <div id="race-logs" style="margin-top: 30px; width: 100%;">
                <h3 style="margin-bottom: 10px;">Race Events</h3>
                <div id="log-box" style="
                    min-height: 175px;
                    max-height: 300px;
                    overflow-y: auto;
                    background-color: #f9f9f9;
                    border: 1px solid #ccc;
                    padding: 10px;
                    font-family: monospace;
                    font-size: 0.95em;
                    border-radius: 5px;
                    box-shadow: 0 2px 6px rgba(0,0,0,0.05);
                    width: 100%;
                    box-sizing: border-box;
                    ">
                    <ul id="log-list" style="list-style: none; padding-left: 0; margin: 0;"></ul>
                </div>

                <ul id="log-list" style="list-style: none; padding-left: 0; margin: 0;"></ul>
            </div>
        </div>


        <script>
            function filtrarPorCompuesto(compuestoSeleccionado) {
                const pilotos = window.ultimoEstadoPilotos || [];

                const enEseCompuesto = pilotos
                    .filter(p => {
                        const compuestoActual = (p.Compound || '').trim().toUpperCase();
                        return compuestoActual === compuestoSeleccionado;
                    })
                    .sort((a, b) => parseFloat(a.Position) - parseFloat(b.Position));

                if (enEseCompuesto.length === 0) {
                    agregarLog(`ðŸŸ¡ No drivers are currently using ${compuestoSeleccionado} tyres`);
                    return;
                }

                agregarLog(`ðŸ” Drivers on ${compuestoSeleccionado} tyres:`);

                enEseCompuesto.forEach(p => {
                    agregarLog(`â€¢ ${p.Driver} (P${p.Position})`);
                });
            }

            function agregarLog(texto) {
                const logList = document.getElementById('log-list');
                const item = document.createElement('li');
                item.textContent = texto;
                item.style.padding = '4px 0';
                item.style.borderBottom = '1px solid #eee';
                logList.prepend(item);
            }

            function agregarSeparadorDeVuelta(texto) {
                const logList = document.getElementById('log-list');
                const item = document.createElement('li');
                item.textContent = `ðŸŸ¢ ${texto}`;
                item.style.padding = '6px 0';
                item.style.fontWeight = 'bold';
                item.style.backgroundColor = '#e8f5e9'; // verde suave
                item.style.borderBottom = '1px solid #c8e6c9';
                item.style.color = '#2e7d32'; // verde fuerte
                logList.prepend(item);
            }
              
            window.onload = () => {
                const socket = io();
                const ctx = document.getElementById('graficoCarrera').getContext('2d');

                const pilotosFijos = [
                    'VET', 'HAM', 'VER', 'BOT', 'PER', 'OCO', 'GRO', 'MAG', 'GAS',
                    'ERI', 'SAI', 'STR', 'RIC', 'HAR', 'LEC', 'RAI', 'VAN', 'ALO',
                    'VAN', 'HUL'
                ];

                const obtenerColorPorEquipo = (equipo) => {
                    const coloresPorEquipo = {
                        'Mercedes': 'rgba(0, 210, 190, 0.7)',
                        'Ferrari': 'rgba(220, 0, 0, 0.7)',
                        'Red Bull Racing': 'rgba(0, 0, 255, 0.7)',
                        'McLaren': 'rgba(255, 128, 0, 0.7)',
                        'Renault': 'rgba(255, 255, 0, 0.7)',
                        'Racing Point': 'rgba(255, 105, 180, 0.7)',
                        'Williams': 'rgba(0, 180, 255, 0.7)',
                        'Toro Rosso': 'rgba(0, 0, 153, 0.7)',
                        'Haas F1 Team': 'rgba(128, 128, 128, 0.7)',
                        'Sauber': 'rgba(102, 0, 204, 0.7)'
                    };

                    return coloresPorEquipo[equipo] || 'gray';
                };

                const grafico = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: pilotosFijos,
                        datasets: [{
                            label: 'Race Position',
                            data: new Array(pilotosFijos.length).fill(null),
                            backgroundColor: pilotosFijos.map(p => 'gray'),
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        animation: {
                            duration: 500,
                            easing: 'easeOutQuart'
                        },
                        plugins: {
                            legend: { display: false },
                            tooltip: {
                                callbacks: {
                                    label: function (ctx) {
                                        const valor = ctx.parsed.y;
                                        const posicionReal = 21 - valor;
                                        const piloto = ctx.chart.data.labels[ctx.dataIndex];
                                        const datosPiloto = window.ultimoEstadoPilotos?.find(p => p.Driver === piloto);

                                        if (!datosPiloto) return `Driver: ${piloto} | DNF`;
                                        const equipo = datosPiloto.Team || 'Unknown Team';
                                        return `Driver: ${piloto} | Position: ${posicionReal} | Team: ${equipo}`;
                                    }
                                }
                            }
                        },
                        scales: {
                            y: {
                                reverse: false,
                                min: 1,
                                max: 20,
                                ticks: {
                                    stepSize: 1,
                                    precision: 0,
                                    callback: function (value) {
                                        return 21 - value;
                                    }
                                },
                                title: { display: true, text: 'Position (1 = leader)' }
                            },
                            x: {
                                title: { display: true, text: 'Drivers' }
                            }
                        }
                    }
                });

                socket.on('nueva-vuelta', (data) => {
                    window.ultimoEstadoPilotos = data.pilotos;
                    document.getElementById('vuelta-titulo').innerText = `Lap ${data.vuelta}`;
                    agregarSeparadorDeVuelta(`Lap ${data.vuelta}`);


                    // ðŸ‘‡ Logs: Best laps
                    data.pilotos.forEach(p => {
                        if (p.IsPersonalBest === 'Yes') {
                            agregarLog(`ðŸš€ ${p.Driver} set a new personal best: ${p.LapTime}`);
                        }
                    });

                    // ðŸ‘‡ Logs: Retired drivers
                    if (window.pilotosEnVueltaAnterior) {
                        const retirados = window.pilotosEnVueltaAnterior.filter(prev =>
                            !data.pilotos.some(p => p.Driver === prev.Driver)
                        );

                        retirados.forEach(p => {
                            agregarLog(`âŒ ${p.Driver} has retired from the race`);
                        });
                    }
                    window.pilotosEnVueltaAnterior = data.pilotos;

                    // Posiciones
                    grafico.data.datasets[0].data = pilotosFijos.map(piloto => {
                        const datosPiloto = data.pilotos.find(p => p.Driver === piloto);
                        return (datosPiloto && datosPiloto.Position) ? 21 - parseFloat(datosPiloto.Position) : null;
                    });

                    // Colores
                    grafico.data.datasets[0].backgroundColor = pilotosFijos.map(piloto => {
                        const datosPiloto = data.pilotos.find(p => p.Driver === piloto);
                        return datosPiloto ? obtenerColorPorEquipo(datosPiloto.Team) : 'rgba(180, 180, 180, 0.8)';
                    });

                    // Mejores vueltas (borde blanco)
                    grafico.data.datasets[0].borderWidth = pilotosFijos.map(piloto => {
                        const datosPiloto = data.pilotos.find(p => p.Driver === piloto);
                        return datosPiloto?.IsPersonalBest === 'Yes' ? 4 : 1;
                    });

                    grafico.data.datasets[0].borderColor = pilotosFijos.map(piloto => {
                        const datosPiloto = data.pilotos.find(p => p.Driver === piloto);
                        return datosPiloto?.IsPersonalBest === 'Yes' ? '#ffffff' : 'rgba(0,0,0,0.1)';
                    });

                    grafico.update();
                });

                // ðŸ‘‰ FunciÃ³n para agregar lÃ­nea al log
                function agregarLog(texto) {
                    const logList = document.getElementById('log-list');
                    const item = document.createElement('li');
                    item.textContent = texto;
                    item.style.padding = '4px 0';
                    item.style.borderBottom = '1px solid #eee';
                    logList.prepend(item);
                }
            };
        </script>


        </div>

    </section> <!-- end s-Race -->


    <!-- clients
    ================================================== -->
    <div id="clients" class="section s-clients">

        <div class="row narrower s-clients__top h-text-center">
            <div class="column">
                <h1 class="display-1" data-aos="fade-up">
                    Learn about the student, the university journey, and the idea that sparked this racing prediction
                    tool.
                </h1>
            </div>
        </div> <!-- s-clients__top -->



        <div class="row testimonials collapse">

            <div class="column large-12">

                <div class="testimonial-slider" data-aos="fade-up">

                    <div class="testimonial-slider__slide">
                        <p>
                            I am a final-year Computer Engineering student with a lifelong passion for Formula
                            1â€”something deeply rooted in my family. Iâ€™m fascinated by data and how it can be used to
                            understand, predict, and solve real-world problems. My inspiration for this project comes
                            from the desire to harness the complexity of race telemetry and transform it into
                            accessible, intelligent solutions that bring insight and value to the sport.
                        </p>
                        <div class="testimonial-slider__author">
                            <img src="images/avatars/user-02.jpg" alt="Author image" class="testimonial-slider__avatar">
                            <cite class="testimonial-slider__cite">
                                <strong>Orianna Milone Salas</strong>
                                <span>Student</span>
                            </cite>
                        </div>
                    </div> <!-- end testimonials__slide -->

                    <div class="testimonial-slider__slide">
                        <p>
                            The university CEU San Pablo is a private Catholic university located in Madrid, Spain.
                            Established in 1993, it is part of the CEU educational group, one of Spain's largest and
                            most traditional private educational institutions, founded in 1933 by the Catholic
                            Association of Propagandists (ACdP).
                            The Higher Polytechnic School at Universidad CEU San Pablo actively promotes research and
                            the development of final degree projects that integrate innovative and complex tools.
                        </p>
                        <div class="testimonial-slider__author">
                            <img src="images/avatars/user-01.jpg" alt="Author image" class="testimonial-slider__avatar">
                            <cite class="testimonial-slider__cite">
                                <strong>CEU San Pablo</strong>
                                <span>University, Madrid</span>
                            </cite>
                        </div>
                    </div> <!-- end testimonials__slide -->

                    <div class="testimonial-slider__slide">
                        <p>
                            This project was developed as part of a Final Degree Project in Computer Engineering, with
                            the goal of applying predictive techniques to real-time motorsport race analysis. By
                            leveraging time series models and historical data, the platform aims to forecast drivers'
                            future positions and offer a dynamic view of race progression. Itâ€™s a blend of motorsport
                            passion, data analysis, and web development.
                        </p>
                        <div class="testimonial-slider__author">
                            <img src="images/avatars/user-03.jpg" alt="Author image" class="testimonial-slider__avatar">
                            <cite class="testimonial-slider__cite">
                                <strong>RaceTrack project</strong>
                                <span>Thesis</span>
                            </cite>
                        </div>
                    </div> <!-- end testimonials__slide -->

                </div> <!-- end testimonial slider -->

            </div> <!-- end column -->

        </div> <!-- end row -->
        <div class="row clients-outer">
            <div class="column">
                <!-- <div class="clients" data-aos="fade-up"> -->
                <div class="clients">
                    <p>... for further and technical information check the repository...</p>
                    <a href="https://github.com/OriannaMilone/RaceTrack" target="_blank" rel="noopener noreferrer"
                        class="clients__slide"><img src="images/icons/clients/github.svg" /></a>
                    <!-- <a href="#0" title="" class="clients__slide"><img src="images/icons/clients/spotify.svg" /></a -->
                </div> <!--end clients -->
            </div> <!-- end column -->
        </div> <!-- end clients-outer -->

    </div> <!-- end s-clients -->


    <!-- contact
    ================================================== -->
    <section class="s-contact">

        <div class="row narrower s-contact__top h-text-center">
            <div class="column">
                <h3 class="h6">Get In Touch</h3>
                <h1 class="display-1">
                    Got suggestions or feedback? Feel free to reach out and help us make this project even better.
                </h1>
            </div>
        </div> <!-- s-footer__top -->

        <div class="row h-text-center" style="text-align: center;">
            <div class="column">
                <p class="s-contact__email" style="font-size: 6rem;">
                    <a href="mailto:#0">racetrackthesis@gmail.com</a>
                </p>
            </div>
        </div>

    </section> <!-- end s-contact -->


    <!-- footer
    ================================================== -->
    <footer class="s-footer">
        <div class="row row-y-top">

            <div class="column large-8 medium-12">
                <div class="row">
                    <div class="column large-7 tab-12 s-footer__block">
                        <h4 class="h6">Where to Find Us</h4>

                        <p>
                            Universidad CEU San Pablo. <br>
                            Escuela PolitÃ©cnica Superior, Av. de MonteprÃ­ncipe,<br>
                            28668 Boadilla del Monte, MAD <br>
                            <a href="tel:197-543-2345">+197 543 2345</a>
                        </p>
                    </div>

                    <div class="column large-5 tab-12 s-footer__block">
                        <h4 class="h6">More information</h4 class="h6">

                        <ul class="s-footer__list">
                            <li><a href="https://github.com/OriannaMilone/RaceTrack" target="_blank">Github</a></li>
                            <li><a href="#0">Thesis Documentation</a></li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="column large-4 medium-12 s-footer__block--end">
                <a href="mailto:#0" class="btn h-full-width">Let's Talk</a>

                <div class="ss-copyright">
                    <span>Copyright Flare 2020</span>
                    <span>Design by <a href="https://www.styleshout.com/" target="_blank">StyleShout</a></span>
                </div>
            </div>

            <div class="ss-go-top">
                <a class="smoothscroll" title="Back to Top" href="#top">
                    top
                </a>
            </div> <!-- end ss-go-top -->

        </div>
    </footer>


    <!-- photoswipe background
    ================================================== -->
    <div aria-hidden="true" class="pswp" role="dialog" tabindex="-1">

        <div class="pswp__bg"></div>
        <div class="pswp__scroll-wrap">

            <div class="pswp__container">
                <div class="pswp__item"></div>
                <div class="pswp__item"></div>
                <div class="pswp__item"></div>
            </div>

            <div class="pswp__ui pswp__ui--hidden">
                <div class="pswp__top-bar">
                    <div class="pswp__counter"></div><button class="pswp__button pswp__button--close"
                        title="Close (Esc)"></button> <button class="pswp__button pswp__button--share"
                        title="Share"></button> <button class="pswp__button pswp__button--fs"
                        title="Toggle fullscreen"></button> <button class="pswp__button pswp__button--zoom"
                        title="Zoom in/out"></button>
                    <div class="pswp__preloader">
                        <div class="pswp__preloader__icn">
                            <div class="pswp__preloader__cut">
                                <div class="pswp__preloader__donut"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                    <div class="pswp__share-tooltip"></div>
                </div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
                <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button>
                <div class="pswp__caption">
                    <div class="pswp__caption__center"></div>
                </div>
            </div>

        </div>

    </div> <!-- end photoSwipe background -->


    <!-- Java Script
    ================================================== -->
    <script src="js/jquery-3.2.1.min.js"></script>
    <script src="js/plugins.js"></script>
    <script src="js/main.js"></script>

</body>

</html>